name = "fitness-pro-api"
main = "src/index.ts"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# Custom domain routes
routes = [
  { pattern = "api.fitpro.vip/*", zone_name = "fitpro.vip" }
]

[observability]
enabled = true

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "fitness-pro-db"
database_id = "8156de65-ed3d-46a9-8b5c-c314e6920aef"

# R2 Storage for videos
[[r2_buckets]]
binding = "VIDEOS"
bucket_name = "fitness-pro-videos"
preview_bucket_name = "fitness-pro-videos-preview"

# Environment variables (use .dev.vars for local secrets)
[vars]
ENVIRONMENT = "production"

# Cron triggers for weekly workout adjustments
[triggers]
crons = ["0 6 * * 1"] # Every Monday at 6am UTC
